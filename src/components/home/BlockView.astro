---
import type { tTodaySchedToBlockMapRes } from '@lib/format';
import {
	bloqueActivo,
	bloques,
	obtenerBloqueActual,
	type tBloques,
} from '@lib/time';
import Block from './Block.astro';

interface Props {
	schedule: tTodaySchedToBlockMapRes;
}
const schedule = Astro.props.schedule as tTodaySchedToBlockMapRes;
const actual_block = obtenerBloqueActual(new Date()) as tBloques;
---

<ul class="timeline timeline-vertical *:ml-[-90%]">
	{
		bloques.map((bloque) => {
			const scheduleBlock = schedule.get(bloque);
			return (
				<Block
					sched={scheduleBlock}
					block={bloque}
					activo={bloqueActivo(actual_block, bloque)}
				/>
			);
		})
	}
	{!schedule.size && <p class="text-gray-500">Nada para hoy ðŸ˜Š</p>}
</ul>
