---
import BlockClock from '../../components/home/BlockClock';
import ClassCard from '../../components/home/ClassCard.astro';
import Clock from '../../components/home/Clock';
import GeneralSideBar from '../../components/home/GeneralSideBar.astro';
import NoClassYet from '../../components/home/NoClassYet.astro';
import DashboardLayout from '../../layouts/DashboardLayout.astro';
import { getClasses } from '../../lib/database';
import { getDay } from '../../lib/time';
const date = new Date();
const { user } = Astro.locals;
const clases = await getClasses(user.uid);
---

<DashboardLayout>
	<main slot="content" class="w-full h-full flex flex-col gap-4">
		<header class="p-4 w-full flex justify-between border border-neutral">
			<div>
				<div class="text-3xl flex flex-wrap">
					<h3 class="mr-2">{getDay(date)}</h3>
					<BlockClock client:only="preact" />
				</div>
				<p class="text-lg text-gray-500">{date.toLocaleDateString()}</p>
			</div>
			<Clock client:only="preact" />
		</header>
		<section class="flex flex-col gap-4 p-4 items-center">
			{!clases.length && <NoClassYet />}
			{clases.map((cls) => <ClassCard data={cls} />)}
		</section>
	</main>
	<GeneralSideBar slot="sidebar" />
</DashboardLayout>
